<!doctype html>
<html lang="en">
  <head>
    <!-- Runtime spatial detection - sets class before page renders -->
    <script>
      (function() {
        // Check environment variable (build time)
        const xrEnv = '__XR_ENV__'; // Will be replaced by Vite
        
        // Check user agent
        const isVisionPro = navigator.userAgent.includes('WebSpatial') || 
                           navigator.userAgent.includes('Apple Vision');
        
        // Check URL path
        const isWebSpatialPath = window.location.pathname.startsWith('/webspatial/avp');
        
        // Check for environment variable at runtime (for development)
        const hasDevXREnv = xrEnv === 'avp' || xrEnv === 'AVP';
        
        // Apply class immediately (before page renders)
        if (isVisionPro || isWebSpatialPath || hasDevXREnv) {
          document.documentElement.classList.add('is-spatial');
          console.log('ü•Ω Spatial mode detected');
        } else {
          document.documentElement.classList.add('is-web');
          console.log('üåê Web mode detected');
        }
      })();
    </script>
    <meta charset="UTF-8" />
      <link rel="icon" type="image/svg+xml" href="/icons/icon-192x192.png" />
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
      />
      <!-- WebSpatial environment hints -->
      <meta name="xr-spatial" content="transparent" />
      <style>
        /* Force transparent background before any other CSS loads */
        html.is-spatial, html.is-spatial body {
          background: transparent !important;
          background-color: transparent !important;
        }
      </style>
      <title>Card Vault - Yu-Gi-Oh! Card Shop</title>

      <!-- PWA -->
      <link rel="manifest" href="/manifest.webmanifest" />
      <meta name="theme-color" content="#1e3a8a" />
      <meta name="apple-mobile-web-app-capable" content="yes" />
      <meta
        name="apple-mobile-web-app-status-bar-style"
        content="black-translucent"
      />
      <meta name="apple-mobile-web-app-title" content="Card Vault" />
      <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
      <meta
        name="description"
        content="Card Vault - Premium Yu-Gi-Oh! Card Collection and Trading Platform"
      />
    </head>
    <body>
      <div id="root"></div>
      <script type="module" src="/src/main.tsx"></script>
    </body>
  </html>
</html>